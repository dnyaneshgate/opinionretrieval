<!DOCTYPE html>
<html>
    <head>
        <title>Opinion Retrieval</title>
    </head>
    <body>
        <div id="piechart"></div>

        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

        <script type="text/javascript">
            // Load google charts
            google.charts.load('current', {'packages':['corechart']});
            google.charts.setOnLoadCallback(drawChart);

            // Draw the chart and set the chart values
            function drawChart() {
                var data = google.visualization.arrayToDataTable([
                    ['Sentiment', 'Percentage'],
                    ['Positive', {{positive_percent}}],
                    ['Negative', {{negative_percent}}]
                ]);

                // Optional; add a title and set the width and height of the chart
                var options = {
                    'title':'Opinion Pie Chart',
                    'width':550,
                    'height':400,
                    'colors': ["#00FF00", "#FF0000"]
                };

                // Display the chart inside the <div> element with id="piechart"
                var chart = new google.visualization.PieChart(document.getElementById('piechart'));
                chart.draw(data, options);
            }
        </script>

        <ul>
            {% for user, tweet, sentiment in tweets %}
                {% if sentiment == 0 %}
                    <h4 style="background-color:#FF0000;">{{ user }}</h4>
                {% else %}
                    <h4 style="background-color:#00FF00;">{{ user }}</h4>
                {% endif %}
                <p>{{ tweet }}</p>
            {% endfor %}
        </ul>
    </body>
</html>
